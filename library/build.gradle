apply plugin: "com.android.library"
apply plugin: "maven"

ext
{
  jacksonVersion="2.8.7"
  droid4meVersion="2.4.8.3-SNAPSHOT"
  appCompatVersion="25.3.0"
  junitVersion="4.0"
  bcelVersion="5.2"
  findVersion="1.0.0"
}

android
{
  compileSdkVersion 25
  buildToolsVersion "25.0.2"

  defaultConfig
  {
    minSdkVersion 9
    targetSdkVersion 25

    versionCode 10
    versionName "2.4.2.1-SNAPSHOT"
  }

  buildTypes
  {
    release
    {
      minifyEnabled false
      zipAlignEnabled true
      proguardFiles getDefaultProguardFile("proguard-android.txt"), "proguard-rules.pro"
    }
  }
}

dependencies
{
  // Third party libraries
  compile("com.fasterxml.jackson.core:jackson-core:$jacksonVersion")
  compile("com.fasterxml.jackson.core:jackson-annotations:$jacksonVersion")
  compile("com.fasterxml.jackson.core:jackson-databind:$jacksonVersion")

  // Smart&Soft
  compile("com.smartnsoft:droid4me:$droid4meVersion")

  // Android
  compile ("com.android.support:appcompat-v7:$appCompatVersion")

  // Test
  testCompile("junit:junit:$junitVersion")
  testCompile("org.apache.bcel:bcel:$bcelVersion")
  testCompile("findbugs:findbugs:$findVersion")
}

uploadArchives
{
  repositories
  {
    mavenDeployer
    {
      repository(url: nexusReleaseUrl)
      {
        authentication(userName: nexusUsername, password: nexusPassword)
      }
      snapshotRepository(url: nexusSnapshotUrl)
      {
        authentication(userName: nexusUsername, password: nexusPassword)
      }

      pom.project
      {
        name "droid4me.ext"
        group = "com.smartnsoft"
        artifactId "droid4me.ext"
        version = android.defaultConfig.versionName
        packaging "aar"
      }
    }
  }
}
